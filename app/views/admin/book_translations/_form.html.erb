<%= form_with(model: [@book, translation],
              url: translation.new_record? ? admin_book_book_translations_path(@book) : admin_book_book_translation_path(@book, translation.id),
              class: "space-y-4") do |f| %>
  <% if translation.errors.any? %>
    <div class="error-messages">
      <h2><%= pluralize(translation.errors.count, "error") %> prohibited this translation from being saved:</h2>
      <ul>
        <% translation.errors.each do |error| %>
          <li><%= error.full_message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div>
    <%- available_languages = @book.selected_languages - @book.book_translations.pluck(:language) %>
    <%- if available_languages.any? %>
      <%= f.label :language, class: "block text-sm font-medium text-gray-700" %>
      <%= f.select :language,
                  options_for_select(available_languages, translation.language),
                {},
                class: "mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500" %>
    <% end %>
  </div>

  <div>
    <%= f.label :title, class: "block text-sm font-medium text-gray-700" %>
    <%= f.text_field :title, class: "mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500" %>
  </div>

  <div>
    <%= f.label :description, class: "block text-sm font-medium text-gray-700" %>
    <%= f.text_area :description, rows: 4, class: "mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500" %>
  </div>

  <div class="flex justify-end space-x-2">
    <%= f.submit class: "btn btn-primary" %>
    <%= link_to "Cancel", admin_book_path(@book), class: "btn btn-ghost" %>
  </div>
<% end %>
